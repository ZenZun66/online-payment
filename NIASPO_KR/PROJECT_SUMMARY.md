# Краткое описание проекта курсовой работы

## Тема работы

**"Настройка и администрирование отказоустойчивого решения для системы обработки платежей"**

## Выполненные требования

### 1. ✅ Анализ предметной области

Создана система обработки платежей с использованием контейнерной платформы Docker. Проведен анализ существующих решений и выбран оптимальный технологический стек.

### 2. ✅ Обоснование выбора технологий

**Выбранные технологии:**
- **Docker** - стандарт индустрии для контейнеризации
- **Docker Compose** - оркестрация для разработки
- **Docker Swarm** - кластеризация для production
- **Node.js/Express** - легковесный и производительный backend
- **PostgreSQL** - надежная реляционная БД с поддержкой репликации
- **Redis** - быстрый кеш и брокер сообщений
- **Nginx** - эффективный reverse proxy и load balancer
- **Prometheus + Grafana** - мониторинг и визуализация
- **RabbitMQ** - надежный брокер сообщений
- **GitHub Actions** - CI/CD pipeline

### 3. ✅ Создание пяти и более контейнеров

Создано **8 контейнеров**:

1. **payment-api** (2 реплики) - основной сервис обработки платежей
2. **postgres** - основная база данных
3. **postgres-replica** - реплика базы данных для отказоустойчивости
4. **redis** - кеш и брокер сообщений
5. **nginx** - reverse proxy и load balancer
6. **prometheus** - система мониторинга
7. **grafana** - визуализация метрик
8. **rabbitmq** - брокер сообщений

### 4. ✅ Кластерная архитектура

Реализована кластерная архитектура через **Docker Swarm**:
- Файл `docker-swarm.yml` с конфигурацией кластера
- Множественные реплики сервисов для отказоустойчивости
- Автоматическое распределение нагрузки
- Overlay сеть для межконтейнерного взаимодействия
- Автоматическое восстановление после сбоев

### 5. ✅ Реализация CI/CD

Создан CI/CD pipeline через **GitHub Actions** (`.github/workflows/ci-cd.yml`):

**Этапы pipeline:**
- Тестирование кода
- Сборка Docker образов
- Проверка безопасности (Trivy)
- Валидация Docker Compose конфигураций
- Автоматический деплой на staging (опционально)

### 6. ✅ Организация деплоя инфраструктуры

**Варианты развертывания:**

1. **Docker Compose** (для разработки):
   ```bash
   docker-compose up -d
   ```

2. **Docker Swarm** (для production):
   ```bash
   docker swarm init
   docker stack deploy -c docker-swarm.yml payment-system
   ```

3. **Автоматический деплой через CI/CD** (GitHub Actions)

**Особенности:**
- Health checks для всех сервисов
- Автоматический перезапуск при сбоях
- Graceful shutdown
- Миграции базы данных при запуске

### 7. ✅ Сетевое межконтейнерное взаимодействие

**Реализовано:**

- Изолированная Docker сеть `payment-network` (subnet: 172.20.0.0/16)
- DNS разрешение имен сервисов
- Балансировка нагрузки через Nginx
- Health checks для автоматического исключения нерабочих инстансов
- Ограничение доступа к внутренним сервисам

**Схема взаимодействия:**
- Nginx → Payment API (балансировка нагрузки)
- Payment API → PostgreSQL (хранение данных)
- Payment API → Redis (кеширование)
- Payment API → RabbitMQ (асинхронная обработка)
- Prometheus → Payment API (сбор метрик)
- Grafana → Prometheus (визуализация)

Подробное описание в файле `NETWORK.md`.

### 8. ✅ Презентация

Рекомендуется создать презентацию на основе следующих материалов:
- `ARCHITECTURE.md` - описание архитектуры
- `README.md` - общее описание проекта
- Скриншоты работы системы
- Диаграммы архитектуры

## Особенности реализации

### Отказоустойчивость

1. **Репликация данных:**
   - PostgreSQL Master-Slave репликация
   - Persistence в Redis (AOF)

2. **Множественные инстансы:**
   - 2+ реплики Payment API
   - Балансировка нагрузки через Nginx

3. **Автоматическое восстановление:**
   - Health checks
   - Auto-restart политики
   - Graceful shutdown

4. **Мониторинг:**
   - Prometheus для сбора метрик
   - Grafana для визуализации
   - Логирование всех операций

### Масштабируемость

- Горизонтальное масштабирование через Docker Swarm
- Вертикальное масштабирование через лимиты ресурсов
- Connection pooling для эффективного использования ресурсов
- Кеширование для снижения нагрузки на БД

### Безопасность

- Изоляция сети
- Rate limiting в Nginx
- Валидация входных данных
- Логирование всех операций
- Использование переменных окружения для секретов

## Структура проекта

Все файлы организованы согласно best practices:

- `docker-compose.yml` - конфигурация для разработки
- `docker-swarm.yml` - конфигурация для production
- `payment-api/` - исходный код приложения
- `nginx/` - конфигурация reverse proxy
- `prometheus/` - конфигурация мониторинга
- `grafana/` - конфигурация визуализации
- `.github/workflows/` - CI/CD pipeline
- Документация в корне проекта

## Документация

Создана полная документация:

1. **README.md** - основная документация проекта
2. **QUICKSTART.md** - быстрый старт
3. **DEPLOYMENT.md** - детальное руководство по развертыванию
4. **ARCHITECTURE.md** - описание архитектуры системы
5. **NETWORK.md** - документация по сетевому взаимодействию
6. **GITHUB_GUIDE.md** - руководство по работе с GitHub

## Технические характеристики

- **Языки программирования:** JavaScript (Node.js)
- **Базы данных:** PostgreSQL 15, Redis 7
- **Веб-сервер:** Nginx Alpine
- **Мониторинг:** Prometheus, Grafana
- **Оркестрация:** Docker Compose, Docker Swarm
- **CI/CD:** GitHub Actions

## Соответствие требованиям методических указаний

✅ Использованы технологии: docker, docker compose, docker swarm, dockerfile, docker-compose.yaml  
✅ Реализовано сетевое взаимодействие контейнеров  
✅ Реализован CI/CD pipeline  
✅ Создан кластер (Docker Swarm)  
✅ Создано 5+ контейнеров  
✅ Обеспечена отказоустойчивость  
✅ Настроен мониторинг  

## Запуск и проверка

Для быстрого запуска системы:

```bash
docker-compose up -d
```

Проверка работоспособности:

```bash
curl http://localhost/health
curl -X POST http://localhost/api/payments \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000, "currency": "RUB", "payment_method": "card", "customer_id": "test"}'
```

Подробные инструкции в файле `QUICKSTART.md`.
